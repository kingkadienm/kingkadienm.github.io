<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android进阶 | 云端记事集</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="专注于记录技术点滴">
    
    <link rel="preload" href="/assets/css/0.styles.59620df1.css" as="style"><link rel="preload" href="/assets/js/app.dda55d99.js" as="script"><link rel="preload" href="/assets/js/2.36384bf7.js" as="script"><link rel="preload" href="/assets/js/1.ef4b05e9.js" as="script"><link rel="preload" href="/assets/js/27.fa2aadbe.js" as="script"><link rel="prefetch" href="/assets/js/10.0db46967.js"><link rel="prefetch" href="/assets/js/11.d62200d2.js"><link rel="prefetch" href="/assets/js/12.ae470926.js"><link rel="prefetch" href="/assets/js/13.b04c57ad.js"><link rel="prefetch" href="/assets/js/14.2a5682fd.js"><link rel="prefetch" href="/assets/js/15.540584f5.js"><link rel="prefetch" href="/assets/js/16.637b4eb3.js"><link rel="prefetch" href="/assets/js/17.fe7e2849.js"><link rel="prefetch" href="/assets/js/18.5341d2b3.js"><link rel="prefetch" href="/assets/js/19.6ee6f591.js"><link rel="prefetch" href="/assets/js/20.20859016.js"><link rel="prefetch" href="/assets/js/21.11e89801.js"><link rel="prefetch" href="/assets/js/22.c1f1019d.js"><link rel="prefetch" href="/assets/js/23.56c6f046.js"><link rel="prefetch" href="/assets/js/24.12d2a1d7.js"><link rel="prefetch" href="/assets/js/25.1361e6c7.js"><link rel="prefetch" href="/assets/js/26.d325d0bc.js"><link rel="prefetch" href="/assets/js/28.f48d0320.js"><link rel="prefetch" href="/assets/js/29.9cf67320.js"><link rel="prefetch" href="/assets/js/3.48c22373.js"><link rel="prefetch" href="/assets/js/30.1b277e37.js"><link rel="prefetch" href="/assets/js/31.02210692.js"><link rel="prefetch" href="/assets/js/32.9908d495.js"><link rel="prefetch" href="/assets/js/33.1c0d4eea.js"><link rel="prefetch" href="/assets/js/34.d9109fdc.js"><link rel="prefetch" href="/assets/js/35.15c6d59a.js"><link rel="prefetch" href="/assets/js/36.018facc3.js"><link rel="prefetch" href="/assets/js/37.7ad375a7.js"><link rel="prefetch" href="/assets/js/38.853e32cf.js"><link rel="prefetch" href="/assets/js/39.a7b671cd.js"><link rel="prefetch" href="/assets/js/4.9dddb9b1.js"><link rel="prefetch" href="/assets/js/40.e2450c82.js"><link rel="prefetch" href="/assets/js/41.b5d48620.js"><link rel="prefetch" href="/assets/js/42.f86aebac.js"><link rel="prefetch" href="/assets/js/43.4fa4bf4f.js"><link rel="prefetch" href="/assets/js/44.8abe291d.js"><link rel="prefetch" href="/assets/js/45.15656e52.js"><link rel="prefetch" href="/assets/js/46.91384044.js"><link rel="prefetch" href="/assets/js/47.2295c328.js"><link rel="prefetch" href="/assets/js/48.5f483206.js"><link rel="prefetch" href="/assets/js/49.0ed56826.js"><link rel="prefetch" href="/assets/js/5.56e04e14.js"><link rel="prefetch" href="/assets/js/50.e7b4c175.js"><link rel="prefetch" href="/assets/js/51.24108b2d.js"><link rel="prefetch" href="/assets/js/52.42e70320.js"><link rel="prefetch" href="/assets/js/53.1f7beaa7.js"><link rel="prefetch" href="/assets/js/54.30a5d395.js"><link rel="prefetch" href="/assets/js/55.46d8da38.js"><link rel="prefetch" href="/assets/js/56.97ac0a4f.js"><link rel="prefetch" href="/assets/js/57.a16d8f1d.js"><link rel="prefetch" href="/assets/js/58.dca4b330.js"><link rel="prefetch" href="/assets/js/59.666c52fb.js"><link rel="prefetch" href="/assets/js/6.2e66bb4a.js"><link rel="prefetch" href="/assets/js/60.6312c910.js"><link rel="prefetch" href="/assets/js/61.559ca5f5.js"><link rel="prefetch" href="/assets/js/62.b9e3ba09.js"><link rel="prefetch" href="/assets/js/63.588981b8.js"><link rel="prefetch" href="/assets/js/64.ecb3ef36.js"><link rel="prefetch" href="/assets/js/65.7cce88c3.js"><link rel="prefetch" href="/assets/js/66.4255bb96.js"><link rel="prefetch" href="/assets/js/67.d1451767.js"><link rel="prefetch" href="/assets/js/68.7cd3bbd9.js"><link rel="prefetch" href="/assets/js/69.4ebb2750.js"><link rel="prefetch" href="/assets/js/7.c69b7236.js"><link rel="prefetch" href="/assets/js/70.b40d6827.js"><link rel="prefetch" href="/assets/js/71.57572ce2.js"><link rel="prefetch" href="/assets/js/72.7cc1a450.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.6fed1ae2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.59620df1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">云端记事集</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/android/" class="nav-link router-link-active">
  Android
</a></div><div class="nav-item"><a href="/flutter/" class="nav-link">
  Flutter
</a></div><div class="nav-item"><a href="/python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/goland/" class="nav-link">
  Goland
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/js/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://github.com/kingkadienm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/android/" class="nav-link router-link-active">
  Android
</a></div><div class="nav-item"><a href="/flutter/" class="nav-link">
  Flutter
</a></div><div class="nav-item"><a href="/python/" class="nav-link">
  Python
</a></div><div class="nav-item"><a href="/goland/" class="nav-link">
  Goland
</a></div><div class="nav-item"><a href="/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/js/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/other/" class="nav-link">
  其他
</a></div><div class="nav-item"><a href="https://github.com/kingkadienm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/android/" aria-current="page" class="sidebar-link">Android 开发笔记</a></li><li><a href="/android/custom_view.html" class="sidebar-link">安卓自定义View基础-坐标系</a></li><li><a href="/android/aidl.html" class="sidebar-link">AIDL 进程间通信</a></li><li><a href="/android/Android知识点收集.html" class="sidebar-link">Android知识点收集</a></li><li><a href="/android/android面试题大全.html" class="sidebar-link">Activity</a></li><li><a href="/android/java.html" class="sidebar-link">Java网络编程（Socket）</a></li><li><a href="/android/适配.html" class="sidebar-link">Android O行为变更：</a></li><li><a href="/android/android-advanced.html" aria-current="page" class="active sidebar-link">Android进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/android/android-advanced.html#架构模式" class="sidebar-link">架构模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/android/android-advanced.html#mvvm" class="sidebar-link">MVVM</a></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#repository-模式" class="sidebar-link">Repository 模式</a></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#依赖注入-hilt" class="sidebar-link">依赖注入（Hilt）</a></li></ul></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#kotlin-协程" class="sidebar-link">Kotlin 协程</a></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#jetpack-组件" class="sidebar-link">Jetpack 组件</a></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#网络与序列化" class="sidebar-link">网络与序列化</a></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#性能与优化" class="sidebar-link">性能与优化</a></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#安全与存储" class="sidebar-link">安全与存储</a></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#测试" class="sidebar-link">测试</a></li><li class="sidebar-sub-header"><a href="/android/android-advanced.html#最佳实践小结" class="sidebar-link">最佳实践小结</a></li></ul></li><li><a href="/android/android-project.html" class="sidebar-link">Android实战项目</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="android进阶"><a href="#android进阶" class="header-anchor">#</a> Android进阶</h1> <h2 id="架构模式"><a href="#架构模式" class="header-anchor">#</a> 架构模式</h2> <h3 id="mvvm"><a href="#mvvm" class="header-anchor">#</a> MVVM</h3> <ul><li>Model：数据与业务逻辑；View：界面；ViewModel：暴露状态与命令，不持有 View 引用。</li> <li>数据驱动：ViewModel 通过 LiveData/StateFlow 暴露 UI 状态，View 观察并更新。</li> <li>生命周期安全：LiveData/StateFlow 与 Lifecycle 绑定，避免内存泄漏。</li></ul> <h3 id="repository-模式"><a href="#repository-模式" class="header-anchor">#</a> Repository 模式</h3> <ul><li>统一数据入口：本地（Room、DataStore）与远程（Retrofit）在 Repository 中聚合。</li> <li>可做缓存策略：先内存/本地，再网络；可暴露 Flow 实现响应式。</li></ul> <h3 id="依赖注入-hilt"><a href="#依赖注入-hilt" class="header-anchor">#</a> 依赖注入（Hilt）</h3> <ul><li>构造注入、单例与作用域、模块与组件；便于测试与解耦。</li> <li>@Inject、@Module、@Provides、@AndroidEntryPoint、@HiltViewModel。</li></ul> <h2 id="kotlin-协程"><a href="#kotlin-协程" class="header-anchor">#</a> Kotlin 协程</h2> <ul><li>挂起函数：suspend；CoroutineScope（lifecycleScope、viewModelScope）；launch、async；withContext 切换调度器（Dispatchers.Main/IO/Default）。</li> <li>取消与异常：Job.cancel、CoroutineExceptionHandler；取消会传播，需在耗时处检查 isActive 或 yield。</li> <li>Flow：冷流、collect、map、filter、flatMapConcat、stateIn/shareIn；用于替代 LiveData 做更复杂流式数据。</li></ul> <h2 id="jetpack-组件"><a href="#jetpack-组件" class="header-anchor">#</a> Jetpack 组件</h2> <ul><li>ViewModel：配置变更存活、与 Activity/Fragment 生命周期关联。</li> <li>LiveData：可观察、生命周期感知、主线程分发；observe、observeAsState（Compose）。</li> <li>Room：DAO、Entity、Database；TypeConverter、Migration；配合 Flow 返回 Flow&lt;List<T>&gt;。</T></li> <li>WorkManager：延迟/周期/约束任务；OneTimeWorkRequest、PeriodicWorkRequest；链式与唯一工作。</li> <li>Navigation：NavHost、NavController、SafeArgs；单 Activity 多 Fragment 或 Compose 路由。</li> <li>DataStore：替代 SharedPreferences；Preferences DataStore、Proto DataStore。</li></ul> <h2 id="网络与序列化"><a href="#网络与序列化" class="header-anchor">#</a> 网络与序列化</h2> <ul><li>Retrofit：接口定义、@GET/@POST、@Body/@Query/@Path；Call 或 suspend 函数；Converter（Gson/Moshi）。</li> <li>OkHttp：Interceptor（日志、鉴权、重试）；Cookie、缓存；可单独使用或作为 Retrofit 底层。</li> <li>序列化：Gson、Moshi、kotlinx.serialization；注意 ProGuard 规则。</li></ul> <h2 id="性能与优化"><a href="#性能与优化" class="header-anchor">#</a> 性能与优化</h2> <ul><li>列表：RecyclerView + ViewHolder、DiffUtil、预取；避免在 onBindViewHolder 做重逻辑。</li> <li>图片：Glide/Coil 加载、占位与错误图、缓存、缩略图与采样；大图或长列表注意内存。</li> <li>启动：Application 与首屏精简、懒加载、异步初始化、Baseline Profile；避免主线程阻塞。</li> <li>内存：LeakCanary 检测；避免非静态内部类持有多余引用、及时取消协程与监听。</li> <li>包体积：minify、shrinkResources、ABI 过滤、资源与 so 优化。</li></ul> <h2 id="安全与存储"><a href="#安全与存储" class="header-anchor">#</a> 安全与存储</h2> <ul><li>敏感数据：EncryptedSharedPreferences、Keystore；密钥不硬编码。</li> <li>组件导出：不需要的 Activity/Service 等设 android:exported=&quot;false&quot;；深链与 intent-filter 需校验数据。</li> <li>网络安全：HTTPS、证书锁定（谨慎）、不要忽略证书错误。</li></ul> <h2 id="测试"><a href="#测试" class="header-anchor">#</a> 测试</h2> <ul><li>单元测试：JUnit4/5、Mockito/MockK；ViewModel、Repository、UseCase 的纯逻辑。</li> <li>UI 测试：Espresso；Idling Resource 处理异步；必要时用 Barista 等封装。</li> <li>测试架构：清晰分层便于 mock；依赖注入便于替换实现。</li></ul> <h2 id="最佳实践小结"><a href="#最佳实践小结" class="header-anchor">#</a> 最佳实践小结</h2> <ul><li>使用 Kotlin、协程、Flow、ViewModel、Repository、Hilt。</li> <li>统一错误处理与加载/空状态；网络与缓存策略明确。</li> <li>遵循 Material Design 与无障碍；适配深色主题与多分辨率。</li> <li>日志与埋点规范；ProGuard 与混淆规则完整；版本与依赖管理清晰。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/android/适配.html" class="prev">
        Android O行为变更：
      </a></span> <span class="next"><a href="/android/android-project.html">
        Android实战项目
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.dda55d99.js" defer></script><script src="/assets/js/2.36384bf7.js" defer></script><script src="/assets/js/1.ef4b05e9.js" defer></script><script src="/assets/js/27.fa2aadbe.js" defer></script>
  </body>
</html>
